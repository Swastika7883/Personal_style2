<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undertone Analysis & Dress Recommendation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        header h1 {
            color: #6a5acd;
        }

        /* Upload Section Styles */
        .upload-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            text-align: center;
            max-width: 600px;
            margin: 0 auto 30px auto;
        }

        .upload-area {
            border: 2px dashed #ccc;
            padding: 40px;
            border-radius: 10px;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .upload-area:hover {
            border-color: #6a5acd;
        }

        /* Body Shape Detection Styles */
        .body-shape-section {
            margin-top: 30px;
            text-align: center;
        }
        
        .body-shape-btn {
            display: inline-block;
            margin: 20px auto;
            padding: 12px 25px;
            background-color: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .body-shape-btn:hover {
            background-color: #ff5252;
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        .body-shape-form {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            display: none;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            text-align: left;
        }
        
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            position: relative;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background-color: #e0e0e0;
            transform: translateY(-50%);
            z-index: 1;
        }
        
        .progress-step {
            width: 30px; /* Slightly smaller to fit 10 steps */
            height: 30px;
            border-radius: 50%;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            position: relative;
            z-index: 2;
        }
        
        .progress-step.active {
            background-color: #6a5acd;
            color: white;
        }
        
        .progress-step.completed {
            background-color: #28a745;
            color: white;
        }
        
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .form-step h2 {
            margin-bottom: 20px;
            color: #6a5acd;
            font-size: 1.6rem;
            text-align: center;
        }
        
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .radio-option:hover {
            border-color: #8a7cff;
            background-color: rgba(106, 90, 205, 0.05);
        }
        
        .radio-option.selected {
            border-color: #6a5acd;
            background-color: rgba(106, 90, 205, 0.1);
        }
        
        .radio-option input {
            margin-right: 10px;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background-color: #6a5acd;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #8a7cff;
        }
        
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-refresh {
            background-color: #17a2b8;
            color: white;
            margin-left: 10px;
        }
        
        .body-shape-results {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .body-shape-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }
        
        .body-shape-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #6a5acd;
        }
        
        /* Bonus Tip Box */
        .bonus-tip-box {
            background-color: #f0f4ff;
            border-left: 5px solid #6a5acd;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
            border-radius: 4px;
        }

        .bonus-tip-title {
            font-weight: bold;
            color: #6a5acd;
            display: block;
            margin-bottom: 5px;
        }

        .body-shape-recommendations {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .outfit-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease;
            background: white;
        }
        
        .outfit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        
        .outfit-image {
            height: 150px;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: #8a7cff;
        }
        
        .outfit-details {
            padding: 12px;
            text-align: left;
        }
        
        .outfit-title {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .outfit-description {
            font-size: 0.85rem;
            color: #6c757d;
        }
        
        .hidden {
            display: none;
        }

        /* ---------------------------------------------------- */
        /* PRODUCT GRID STYLES (Restored)                       */
        /* ---------------------------------------------------- */
        .card {
            margin-top: 40px;
        }
        
        .boxy {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
        }
        
        .small-box {
            flex: 0 1 300px;
            background-color: white;
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
            text-align: left;
        }

        .small-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .pics {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .small-box p {
            font-size: 0.9rem;
            color: #555;
            line-height: 1.4;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Find Your Perfect Colors & Fit</h1>
            <p>Upload your photo to discover your undertone and get personalized fashion recommendations</p>
        </header>

        <div class="upload-section">
            <input type="file" id="imageUpload" accept="image/*" hidden>
            <div class="upload-area" id="uploadArea">
                <p style="font-size: 2rem; margin-bottom: 10px;">‚òÅÔ∏è</p>
                <p>Click to upload your photo</p>
            </div>
            <button id="analyzeBtn" class="btn" disabled style="margin-top: 15px;">Analyze Undertone</button>
        </div>

        <div class="body-shape-section">
            <button class="body-shape-btn" id="bodyShapeBtn">Discover Your Body Shape</button>
            
            <div class="body-shape-form" id="bodyShapeForm">
                <div class="progress-bar">
                    <div class="progress-step active" id="step-1">1</div>
                    <div class="progress-step" id="step-2">2</div>
                    <div class="progress-step" id="step-3">3</div>
                    <div class="progress-step" id="step-4">4</div>
                    <div class="progress-step" id="step-5">5</div>
                    <div class="progress-step" id="step-6">6</div>
                    <div class="progress-step" id="step-7">7</div>
                    <div class="progress-step" id="step-8">8</div>
                    <div class="progress-step" id="step-9">9</div>
                    <div class="progress-step" id="step-10">10</div>
                </div>
                
                <div class="form-step active" id="step1">
                    <h2>1. Describe your waist in relation to your hips</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="waist-hip" value="significantly-smaller">
                            <span>My waist is significantly smaller than my hips</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="waist-hip" value="slightly-smaller">
                            <span>My waist is a little smaller than my hips</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="waist-hip" value="same">
                            <span>My waist is the same as my hips</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="waist-hip" value="bigger">
                            <span>My waist is bigger than my hips</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" disabled>Previous</button>
                        <div>
                            <button class="btn btn-primary" id="next1">Next</button>
                            <button class="btn btn-refresh" id="refresh1">Refresh</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-step" id="step2">
                    <h2>2. Describe your shoulders in relation to your hips</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="shoulder-hip" value="narrower">
                            <span>My shoulders are narrower than my hips</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="shoulder-hip" value="same">
                            <span>My shoulders are about the same width as my hips</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="shoulder-hip" value="broader">
                            <span>My shoulders are broader than my hips</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" id="prev2">Previous</button>
                        <div>
                            <button class="btn btn-primary" id="next2">Next</button>
                            <button class="btn btn-refresh" id="refresh2">Refresh</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-step" id="step3">
                    <h2>3. Describe your bust in relation to your waist</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="bust-waist" value="smaller">
                            <span>My bust is smaller than my waist</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="bust-waist" value="same">
                            <span>My bust is about the same size as my waist</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="bust-waist" value="larger">
                            <span>My bust is larger than my waist</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" id="prev3">Previous</button>
                        <div>
                            <button class="btn btn-primary" id="next3">Next</button>
                            <button class="btn btn-refresh" id="refresh3">Refresh</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-step" id="step4">
                    <h2>4. Where do you tend to gain weight first?</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="weight-dist" value="upper">
                            <span>Upper body (arms, chest, back)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="weight-dist" value="middle">
                            <span>Middle section (waist, stomach)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="weight-dist" value="lower">
                            <span>Lower body (hips, thighs)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="weight-dist" value="even">
                            <span>Evenly distributed throughout my body</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" id="prev4">Previous</button>
                        <div>
                            <button class="btn btn-primary" id="next4">Next</button>
                            <button class="btn btn-refresh" id="refresh4">Refresh</button>
                        </div>
                    </div>
                </div>

                <div class="form-step" id="step5">
                    <h2>5. How would you describe your vertical proportions?</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="vertical-prop" value="long-torso">
                            <span>Long torso, shorter legs</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="vertical-prop" value="balanced">
                            <span>Balanced torso and legs</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="vertical-prop" value="long-legs">
                            <span>Short torso, longer legs</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" id="prev5">Previous</button>
                        <div>
                            <button class="btn btn-primary" id="next5">Next</button>
                            <button class="btn btn-refresh" id="refresh5">Refresh</button>
                        </div>
                    </div>
                </div>

                <div class="form-step" id="step6">
                    <h2>6. Which height category fits you best?</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="height-cat" value="petite">
                            <span>Petite (Under 5'3" / 160cm)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="height-cat" value="average">
                            <span>Average (5'3" - 5'7" / 160-170cm)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="height-cat" value="tall">
                            <span>Tall (Over 5'7" / 170cm)</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" id="prev6">Previous</button>
                        <div>
                            <button class="btn btn-primary" id="next6">Next</button>
                            <button class="btn btn-refresh" id="refresh6">Refresh</button>
                        </div>
                    </div>
                </div>

                <div class="form-step" id="step7">
                    <h2>7. How would you describe your neck?</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="neck-type" value="short">
                            <span>Shorter or wider neck</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="neck-type" value="average">
                            <span>Average length</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="neck-type" value="long">
                            <span>Long and slender</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" id="prev7">Previous</button>
                        <div>
                            <button class="btn btn-primary" id="next7">Next</button>
                            <button class="btn btn-refresh" id="refresh7">Refresh</button>
                        </div>
                    </div>
                </div>

                <div class="form-step" id="step8">
                    <h2>8. How do you feel about showing your arms?</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="arm-pref" value="show">
                            <span>Comfortable showing them (Sleeveless is fine)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="arm-pref" value="cover">
                            <span>Prefer to cover them (Sleeves preferred)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="arm-pref" value="neutral">
                            <span>No strong preference</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" id="prev8">Previous</button>
                        <div>
                            <button class="btn btn-primary" id="next8">Next</button>
                            <button class="btn btn-refresh" id="refresh8">Refresh</button>
                        </div>
                    </div>
                </div>

                <div class="form-step" id="step9">
                    <h2>9. What is your favorite feature to highlight?</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="best-feature" value="legs">
                            <span>Legs</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="best-feature" value="waist">
                            <span>Waist</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="best-feature" value="upper">
                            <span>Upper Body / Face</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" id="prev9">Previous</button>
                        <div>
                            <button class="btn btn-primary" id="next9">Next</button>
                            <button class="btn btn-refresh" id="refresh9">Refresh</button>
                        </div>
                    </div>
                </div>

                <div class="form-step" id="step10">
                    <h2>10. What fit style do you generally prefer?</h2>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="fit-pref" value="tight">
                            <span>Form-fitting / Tight</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="fit-pref" value="tailored">
                            <span>Tailored / Structured</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="fit-pref" value="loose">
                            <span>Loose / Flowy</span>
                        </label>
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" id="prev10">Previous</button>
                        <div>
                            <button class="btn btn-primary" id="calculate">Calculate Final Result</button>
                            <button class="btn btn-refresh" id="refresh10">Refresh</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="body-shape-results" id="bodyShapeResults">
                <div class="body-shape-icon" id="shape-icon">‚è≥</div>
                <h2 class="body-shape-title" id="shape-title">Your Body Shape</h2>
                <p class="body-shape-description" id="shape-description"></p>
                
                <div class="bonus-tip-box" id="bonus-tip-box">
                    <span class="bonus-tip-title">üí° Personalized Style Tips:</span>
                    <span id="bonus-tip-text"></span>
                </div>
                
                

[Image of female body shapes comparison hourglass pear apple rectangle inverted triangle]


                <h3>Recommended Outfits</h3>
                <div class="body-shape-recommendations" id="outfit-recommendations">
                    </div>
                
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" id="restart">Start Over</button>
                    <button class="btn btn-refresh" id="refreshResults">Take Quiz Again</button>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="boxy">
                <div class="small-box">
                    <img class="pics" src="https://i.pinimg.com/736x/2d/b1/16/2db11664a829058e0574a4f59659398b.jpg" alt="Fashion Item">
                    <p>Long Sleeves Loose Elasticity Solid Color Zipper Lapel Jackets Outerwear $67.99 USD</p>
                </div>
                <div class="small-box">
                    <img class="pics" src="https://i.pinimg.com/1200x/d1/5c/d9/d15cd9d7f41fe3dfef9b94e924bc5a6a.jpg" alt="Fashion Item">
                    <p>Long Sleeves Loose Elasticity Solid Color Zipper Lapel Jackets Outerwear $67.99 USD</p>
                </div>
                <div class="small-box">
                    <img class="pics" src="https://i.pinimg.com/1200x/1b/52/c1/1b52c12909d1eaf0616b444a3c103044.jpg" alt="Fashion Item">
                    <p>Long Sleeves Loose Elasticity Solid Color Zipper Lapel Jackets Outerwear $67.99 USD</p>
                </div>
                <div class="small-box">
                    <img class="pics" src="https://www.uoozee.com/cdn/shop/files/ffdd52f83db790ae48a3c0f65d36f999.jpg?v=1748447570&width=1280" alt="Fashion Item">
                    <p>Long Sleeves Loose Elasticity Solid Color Zipper Lapel Jackets Outerwear $67.99 USD</p>
                </div>
                <div class="small-box">
                    <img class="pics" src="https://i.pinimg.com/1200x/5d/85/f8/5d85f8d4e043bd607dd315cef0345146.jpg" alt="Fashion Item">
                    <p>Long Sleeves Loose Elasticity Solid Color Zipper Lapel Jackets Outerwear $67.99 USD</p>
                </div>
                <div class="small-box">
                    <img class="pics" src="https://www.uoozee.com/cdn/shop/files/73de006e7adbb7a66590939d9590a60c.jpg?v=1748403890&width=1280" alt="Fashion Item">
                    <p>Long Sleeves Loose Elasticity Solid Color Zipper Lapel Jackets Outerwear $67.99 USD</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const bodyShapeBtn = document.getElementById('bodyShapeBtn');
            const bodyShapeForm = document.getElementById('bodyShapeForm');
            const bodyShapeResults = document.getElementById('bodyShapeResults');
            
            // Collect all step elements dynamically
            const steps = [];
            for(let i=1; i<=10; i++) {
                steps.push(document.getElementById(`step${i}`));
            }
            
            // Collect all progress steps
            const progressSteps = document.querySelectorAll('.progress-step');
            
            // Buttons
            const calculateBtn = document.getElementById('calculate');
            const restartBtn = document.getElementById('restart');
            
            // Form data storage
            const formData = {
                waistHip: '', shoulderHip: '', bustWaist: '', weightDist: '',
                verticalProp: '', heightCat: '', 
                neckType: '', armPref: '', bestFeature: '', fitPref: ''
            };
            
            // Names of radio groups for each step to validate
            const stepNames = [
                'waist-hip', 'shoulder-hip', 'bust-waist', 'weight-dist',
                'vertical-prop', 'height-cat', 'neck-type', 'arm-pref',
                'best-feature', 'fit-pref'
            ];

            // Open Quiz
            bodyShapeBtn.addEventListener('click', () => {
                bodyShapeForm.style.display = 'block';
                bodyShapeBtn.style.display = 'none';
                window.scrollTo({top: bodyShapeForm.offsetTop - 20, behavior: 'smooth'});
            });

            // Generic Navigation Function
            function goToStep(currentStepIndex, nextStepIndex) {
                // Validate current step
                const currentName = stepNames[currentStepIndex];
                const selected = document.querySelector(`input[name="${currentName}"]:checked`);
                
                if (selected || nextStepIndex < currentStepIndex) { // Allow going back without selection
                    if(selected) formData[Object.keys(formData)[currentStepIndex]] = selected.value;
                    
                    steps[currentStepIndex].classList.remove('active');
                    steps[nextStepIndex].classList.add('active');
                    updateProgress(nextStepIndex + 1);
                } else {
                    alert('Please select an option to continue.');
                }
            }

            // Assign Event Listeners for NEXT buttons (1 to 9)
            for(let i=1; i<=9; i++) {
                document.getElementById(`next${i}`).addEventListener('click', () => {
                    goToStep(i-1, i); // Index is i-1, Next index is i
                });
            }

            // Assign Event Listeners for PREV buttons (2 to 10)
            for(let i=2; i<=10; i++) {
                document.getElementById(`prev${i}`).addEventListener('click', () => {
                    steps[i-1].classList.remove('active');
                    steps[i-2].classList.add('active');
                    updateProgress(i-1);
                });
            }

            // Refresh Buttons
            for(let i=1; i<=10; i++) {
                document.getElementById(`refresh${i}`).addEventListener('click', refreshQuiz);
            }
            document.getElementById('refreshResults').addEventListener('click', refreshQuiz);

            // Calculate Final Result
            calculateBtn.addEventListener('click', () => {
                const selected = document.querySelector(`input[name="fit-pref"]:checked`);
                if (selected) {
                    formData.fitPref = selected.value;
                    calculateBodyShape();
                } else {
                    alert('Please select an option to continue.');
                }
            });

            function updateProgress(step) {
                progressSteps.forEach((progressStep, index) => {
                    if (index < step) {
                        progressStep.classList.add('completed');
                        progressStep.classList.remove('active');
                    } else if (index === step - 1) {
                        progressStep.classList.add('active');
                        progressStep.classList.remove('completed');
                    } else {
                        progressStep.classList.remove('active', 'completed');
                    }
                });
            }

            function refreshQuiz() {
                document.querySelectorAll('input[type="radio"]').forEach(radio => radio.checked = false);
                document.querySelectorAll('.radio-option').forEach(option => option.classList.remove('selected'));
                Object.keys(formData).forEach(key => formData[key] = '');
                
                steps.forEach(s => s.classList.remove('active'));
                steps[0].classList.add('active');
                updateProgress(1);
                
                bodyShapeResults.style.display = 'none';
                bodyShapeForm.style.display = 'none';
                bodyShapeBtn.style.display = 'inline-block';
                window.scrollTo({top: bodyShapeBtn.offsetTop - 20, behavior: 'smooth'});
            }

            restartBtn.addEventListener('click', () => {
                refreshQuiz();
                bodyShapeForm.style.display = 'block';
                bodyShapeBtn.style.display = 'none';
            });

            // Visual selection for radio buttons
            document.querySelectorAll('.radio-option').forEach(option => {
                option.addEventListener('click', () => {
                    const radio = option.querySelector('input[type="radio"]');
                    radio.checked = true;
                    option.parentNode.querySelectorAll('.radio-option').forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                });
            });

            function calculateBodyShape() {
                let bodyShape = '', description = '', icon = '';
                
                // Logic based on first 4 measurements
                if (formData.waistHip === 'significantly-smaller' && formData.bustWaist === 'larger') {
                    bodyShape = 'Hourglass';
                    description = 'Balanced bust and hips with a defined waist.';
                    icon = '‚è≥';
                } else if (formData.waistHip === 'slightly-smaller' && formData.shoulderHip === 'narrower') {
                    bodyShape = 'Pear';
                    description = 'Hips wider than shoulders with a defined waist.';
                    icon = 'üçê';
                } else if (formData.shoulderHip === 'broader') {
                    bodyShape = 'Inverted Triangle';
                    description = 'Broad shoulders with narrower hips.';
                    icon = 'üîª';
                } else if (formData.waistHip === 'bigger' || formData.weightDist === 'middle') {
                    bodyShape = 'Round';
                    description = 'Weight concentrated around the midsection.';
                    icon = '‚≠ï';
                } else {
                    bodyShape = 'Rectangle';
                    description = 'Shoulders, waist, and hips are similar in size.';
                    icon = 'üìè';
                }

                // Building the Bonus Tip based on NEW QUESTIONS (5-10)
                let tips = [];
                
                // Q5 Vertical
                if(formData.verticalProp === 'long-torso') tips.push("Use high-waisted bottoms to elongate legs.");
                if(formData.verticalProp === 'long-legs') tips.push("Drop-waist styles look great on you.");

                // Q6 Height
                if(formData.heightCat === 'petite') tips.push("Monochromatic looks will add height.");
                if(formData.heightCat === 'tall') tips.push("You can rock large prints and maxis.");

                // Q7 Neck
                if(formData.neckType === 'short') tips.push("V-necks will help elongate your neckline.");
                
                // Q8 Arms
                if(formData.armPref === 'cover') tips.push("Look for 3/4 sleeves or sheer sleeves for coverage without bulk.");

                // Q9 Feature
                if(formData.bestFeature === 'legs') tips.push("Short skirts or high slits are your best friend!");
                if(formData.bestFeature === 'waist') tips.push("Always use belts to highlight your waist.");

                // Q10 Fit
                if(formData.fitPref === 'loose' && bodyShape !== 'Round') tips.push("Balance loose items with one fitted piece to avoid looking swamped.");

                // Display results
                document.getElementById('shape-icon').textContent = icon;
                document.getElementById('shape-title').textContent = bodyShape;
                document.getElementById('shape-description').textContent = description;
                document.getElementById('bonus-tip-text').innerText = tips.join(" ");

                generateOutfitRecommendations(bodyShape);
                
                bodyShapeForm.style.display = 'none';
                bodyShapeResults.style.display = 'block';
                window.scrollTo({top: bodyShapeResults.offsetTop - 20, behavior: 'smooth'});
            }

            function generateOutfitRecommendations(bodyShape) {
                const recommendationsContainer = document.getElementById('outfit-recommendations');
                recommendationsContainer.innerHTML = '';
                
                let outfits = [];
                // Basic mapping based on core shape
                switch(bodyShape) {
                    case 'Hourglass':
                        outfits = [
                            { title: 'Wrap Dress', description: 'Accentuates waist', icon: 'üëó' },
                            { title: 'Belted Jacket', description: 'Highlights curves', icon: 'üß•' }
                        ]; break;
                    case 'Pear':
                        outfits = [
                            { title: 'A-Line Skirt', description: 'Glides over hips', icon: 'üëó' },
                            { title: 'Statement Top', description: 'Draws eyes up', icon: 'üëö' }
                        ]; break;
                    case 'Inverted Triangle':
                        outfits = [
                            { title: 'V-Neck Top', description: 'Softens shoulders', icon: 'üëö' },
                            { title: 'Wide Leg Pants', description: 'Adds volume below', icon: 'üëñ' }
                        ]; break;
                    case 'Round':
                        outfits = [
                            { title: 'Empire Waist', description: 'Flows over midsection', icon: 'üëó' },
                            { title: 'Long Layers', description: 'Creates vertical lines', icon: 'üß•' }
                        ]; break;
                    case 'Rectangle':
                        outfits = [
                            { title: 'Ruffled Top', description: 'Adds volume', icon: 'üëö' },
                            { title: 'Fit & Flare', description: 'Creates waist illusion', icon: 'üëó' }
                        ]; break;
                }
                
                // Add specific recommendations based on NEW QUESTIONS
                if(formData.neckType === 'short') {
                    outfits.push({title: 'Deep V-Neck', description: 'Elongates neck', icon: 'üëï'});
                }
                if(formData.bestFeature === 'legs') {
                    outfits.push({title: 'Mini Skirt/Shorts', description: 'Show off legs', icon: 'ü©≥'});
                }
                if(formData.fitPref === 'tailored') {
                    outfits.push({title: 'Structured Blazer', description: 'Matches your style pref', icon: 'üëî'});
                }

                // Ensure we have 4 items max for layout
                while(outfits.length > 4) outfits.pop();
                while(outfits.length < 4) outfits.push({ title: 'Classic Tee', description: 'Versatile basic', icon: 'üëï' });

                outfits.forEach(outfit => {
                    const card = document.createElement('div');
                    card.className = 'outfit-card';
                    card.innerHTML = `<div class="outfit-image">${outfit.icon}</div><div class="outfit-details"><div class="outfit-title">${outfit.title}</div><div class="outfit-description">${outfit.description}</div></div>`;
                    recommendationsContainer.appendChild(card);
                });
            }
        });
    </script>
</body>
</html>